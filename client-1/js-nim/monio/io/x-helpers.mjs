/*! Monio: x-helpers.mjs
    v0.34.0-pre (c) 2022 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
import{EMPTY_FUNC,curry}from"../lib/util.mjs";import IOx from"./iox.mjs";reduce=curry(reduce,2);export default{filterIn:filterIn,filterOut:filterOut,distinct:distinct,distinctUntilChanged:distinctUntilChanged,reduce:reduce,seq:seq,waitFor:waitFor,merge:IOx.merge,zip:IOx.zip,doIOx:IOx.do,doEIOx:IOx.doEither,fromIter:IOx.fromIter,toIter:IOx.toIter};export{filterIn};export{filterOut};export{distinct};export{distinctUntilChanged};export{reduce};export{seq};export{waitFor};export let{merge:merge}=IOx;export let{zip:zip}=IOx;export let{do:doIOx}=IOx;export let{doEither:doEIOx}=IOx;export let{fromIter:fromIter}=IOx;export let{toIter:toIter}=IOx;function filterIn(t){const e=IOx.of.empty();e.freeze(),e.close=EMPTY_FUNC;var r=IOx.of.empty();return function filter(n){return t(n)?(r(n),r):e}}function filterOut(t){return filterIn((e=>!t(e)))}function distinct(){var t=new Set,e=new WeakSet;return filterIn((function distinct(r){var n=r&&["object","function"].includes(typeof r)?e:t;return!n.has(r)&&(n.add(r),!0)}))}function distinctUntilChanged(){var t={};return filterIn((function distinctUntilChanged(e){if(t instanceof WeakSet){if(!e||!["object","function"].includes(typeof e))return t=e,!0;if(!t.has(e))return(t=new WeakSet).add(e),!0}else{if(e&&["object","function"].includes(typeof e))return(t=new WeakSet).add(e),!0;if(!Object.is(e,t))return t=e,!0}return!1}))}function reduce(t,e){var r=IOx.of.empty(),n=e;return function reduce(e){return n=t(n,e),r(n),r}}function seq(t=0,e=1){return reduce(((t,r)=>t+e),t-e)}function waitFor(t){return IOx(((t,e)=>e),[t])}